/* =========================================
   1. 全域歸零與基礎設定
   ========================================= */
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body {
    background-color: #141414;
    color: #E5E5E5;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}

/* =========================================
   2. 統一色系設定 (Unified Color System) 
   ✨ 這裡控制所有地方的顏色：卡片標籤、視窗膠囊、編輯按鈕
   ========================================= */
/* 追劇中 (綠) */
.status-watching, .pill-watching, .btn-watching { background-color: #2ecc71; }
/* 已看完 (灰) */
.status-completed, .pill-completed, .btn-completed { background-color: #95a5a6; }
/* 待看 (橘) */
.status-plan, .pill-plan, .btn-plan { background-color: #f39c12; }
/* 棄劇 (紅) */
.status-dropped, .pill-dropped, .btn-dropped { background-color: #e74c3c; }

/* =========================================
   3. 頁首 (Header)
   ========================================= */
#header {
    position: fixed; top: 0; left: 0; width: 100%; min-height: 80px; 
    background-color: #141414; display: flex; justify-content: space-between; 
    align-items: center; padding: 10px 30px; border-bottom: 1px solid #333; z-index: 1000;
}
.logo { font-size: 1.5em; font-weight: bold; color: #FFFFFF; white-space: nowrap; margin-right: 20px; cursor: pointer; }
.header-controls { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }

/* 輸入框、下拉選單、登入按鈕共用 */
.header-controls input, .header-controls select, #login-btn, #add-btn {
    background-color: #2F2F2F; color: #E5E5E5; border: 1px solid #404040;
    padding: 6px 15px; border-radius: 20px; font-size: 0.9em; outline: none;
    height: 38px; transition: all 0.2s;
}
#search-input { width: 150px; padding-left: 15px; }
#search-input:focus { width: 200px; background-color: #404040; }
#login-btn , #add-btn{ cursor: pointer; font-weight: 500; display: flex; align-items: center; justify-content: center; }
/* 懸浮效果 */
.header-controls input:hover, .header-controls select:hover, #login-btn:hover, #add-btn:hover {
    border-color: #4DB6AC; background-color: #383838; color: #fff;
}
#login-btn:hover, #add-btn:hover { color: #4DB6AC; }

/* =========================================
   4. 卡片列表 (Cards)
   ========================================= */
#book-container {
    margin-top: 100px; display: flex; flex-wrap: wrap; gap: 20px; padding: 20px;
    min-height: calc(100vh - 100px); justify-content: center; align-content: flex-start;
}
.book-card {
    position: relative; border: 1px solid #404040; border-radius: 8px; width: 220px;
    background-color: #2F2F2F; overflow: hidden; transition: transform 0.2s, box-shadow 0.2s; cursor: pointer;
}
.book-card:hover { transform: translateY(-5px); box-shadow: 0 8px 16px rgba(0,0,0,0.6); border-color: #777; z-index: 10; }
.book-card img { width: 100%; aspect-ratio: 3 / 4; object-fit: cover; filter: brightness(0.9); transition: filter 0.2s; }
.book-card:hover img { filter: brightness(1); }
.card-content { padding: 12px; }
.book-title { font-size: 1.1em; font-weight: bold; color: #FFFFFF; margin-bottom: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.book-info { color: #B3B3B3; font-size: 0.85em; margin-bottom: 5px; }
.status-badge { position: absolute; top: 8px; right: 8px; padding: 3px 8px; border-radius: 12px; color: white; font-size: 0.75em; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.5); z-index: 5; }
.tag { display: inline-block; background-color: rgba(255, 255, 255, 0.1); color: #80DEEA; border: 1px solid rgba(128, 222, 234, 0.3); padding: 2px 6px; border-radius: 4px; font-size: 0.75em; margin-right: 5px; margin-bottom: 5px; }
.star-rating { margin-left: 5px; }
.star-rating .fa-regular { color: #555; }

/* =========================================
   5. 彈跳視窗 (Modal)
   ========================================= */
.modal-overlay {
    display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.85); z-index: 2000; justify-content: center;
    align-items: center; padding: 20px; backdrop-filter: blur(5px);
}
.modal-content {
    background-color: #1f1f1f; width: 100%; max-width: 900px; border-radius: 12px;
    position: relative; box-shadow: 0 15px 40px rgba(0,0,0,0.8); overflow: hidden;
    animation: zoomIn 0.3s ease; border: 1px solid #333;
}
@keyframes zoomIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
.modal-layout { display: flex; gap: 30px; padding: 30px; }
.modal-left { flex-shrink: 0; width: 280px; }
#modal-img { width: 100%; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); aspect-ratio: 2/3; object-fit: cover; }
.modal-right { flex-grow: 1; color: #e5e5e5; display: flex; flex-direction: column; }
#modal-title { font-size: 2.2em; margin-bottom: 10px; color: #fff; line-height: 1.2; }
.modal-meta-row { color: #4DB6AC; font-size: 1.1em; margin-bottom: 15px; font-weight: 500; }
.modal-intro-section p { margin-top: 10px; line-height: 1.8; color: #b3b3b3; max-height: 300px; overflow-y: auto; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; }
/* --- 在 @media (max-width: 768px) 裡面找到這個並替換 --- */

.close-btn { top: 15px; right: 15px; background: none; border: none; border-radius: 0; width: auto; height: auto; font-size: 32px; color: #888; line-height: 1; text-align: right;}

/* 加入手機觸碰時的變色效果 */
.close-btn:active { color: #fff;}
/* 視窗內的狀態膠囊 */
.modal-status-pill { display: inline-block; padding: 6px 16px; border-radius: 50px; color: white; font-size: 0.9em; font-weight: bold; letter-spacing: 1px; box-shadow: 0 2px 6px rgba(0,0,0,0.3); }

/* =========================================
   6. 管理員全功能編輯模式 (Full Edit Mode)
   ========================================= */
.edit-mode-header {
    color: #4DB6AC; font-size: 1.5em; font-weight: bold; margin-bottom: 20px;
    padding-bottom: 10px; border-bottom: 1px solid #444; display: flex; justify-content: space-between; align-items: center;
}
/* 讓多個輸入框排在同一行 (Grid) */
.form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 15px; margin-bottom: 15px; }
.form-group { margin-bottom: 15px; }
.form-label { display: block; color: #aaa; font-size: 0.9em; margin-bottom: 5px; }

/* 輸入框樣式 */
.full-input, .admin-textarea {
    width: 100%; padding: 10px; background-color: #2a2a2a; border: 1px solid #444;
    border-radius: 6px; color: #fff; font-size: 1em; outline: none; transition: border-color 0.2s;
}
.full-input:focus, .admin-textarea:focus { border-color: #4DB6AC; background-color: #333; }
.admin-textarea { min-height: 120px; line-height: 1.6; resize: vertical; font-family: inherit; }

/* 按鈕區 */
.edit-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px; border-top: 1px solid #444; padding-top: 15px; }
.btn-save, .btn-delete { padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 5px; color: white; }
.btn-save { background-color: #4DB6AC; } .btn-save:hover { background-color: #3a9b92; }
.btn-delete { background-color: #e74c3c; } .btn-delete:hover { background-color: #c0392b; }

/* ✨ 狀態切換按鈕 ✨ */
#status-toggle-btn, #add-status-btn {
    width: 100%; padding: 10px; border-radius: 6px; border: none; color: white;
    font-size: 0.95em; font-weight: bold; cursor: pointer; transition: all 0.2s;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3); text-align: center; letter-spacing: 1px;
}
#status-toggle-btn:hover, #add-status-btn:hover { transform: translateY(-2px); filter: brightness(1.1); }
#status-toggle-btn:active, #add-status-btn:active { transform: scale(0.95); }

/* =========================================
   7. 手機版響應式 (Mobile)
   ========================================= */
@media (max-width: 768px) {
    #header { flex-direction: column; height: auto; padding: 15px; gap: 10px; }
    .header-controls { width: 100%; justify-content: space-between; gap: 8px; }
    #search-input { width: 100% !important; order: 1; margin-bottom: 5px; }
    .header-controls select, #login-btn, #add-btn{ order: 2; flex: 1 0 48%; max-width: 49%; height: 42px; font-size: 0.85em; text-align: center; padding: 0 5px; }
    #book-container { margin-top: 240px; padding: 10px; gap: 10px; }
    .book-card { width: calc(50% - 5px); }
    .modal-content { width: 95%; max-height: 90vh; overflow-y: auto; }
    .modal-layout { flex-direction: column; padding: 20px; gap: 15px; }
    .modal-left { width: 100%; text-align: center; }
    #modal-img { width: 140px; }
    .modal-right { text-align: center; }
    .form-row { grid-template-columns: 1fr; } /* 手機表單變單欄 */
    .close-btn { top: 10px; right: 10px; background: rgba(0,0,0,0.5); border-radius: 50%; width: 32px; height: 32px; line-height: 30px; text-align: center; font-size: 24px; color: white; }
}